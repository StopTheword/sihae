<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="<?= $this->asset('/css/normalize.css') ?> " />

    <?php if (isset($user) && $user->getIsAdmin() === true) : ?>
        <!-- font-awesome is only used when the user is an admin -->
        <link rel="stylesheet" href="<?= $this->asset('/css/font-awesome.min.css') ?> " />

        <!-- alert-alert is only used when the user is an admin -->
        <link rel="stylesheet" href="<?= $this->asset('/css/alert-alert.min.css') ?> " />
    <?php endif ?>

    <?= $this->section('styles') ?>

    <link rel="stylesheet" href="<?= $this->asset('/css/sihae.css') ?> " />

    <title><?= $settings['title'] ?></title>
</head>
<body>
    <nav>
        <ul>
            <?php if (isset($user)) : ?>
                <?php if ($user->getIsAdmin() === true) : ?>
                    <li><a href="/new">Add a new post</a></li>
                <?php endif ?>

                <li><a href="/archive">Archive</a></li>
                <li><a href="/logout">Logout</a></li>
            <?php else : ?>
                <li><a href="/archive">Archive</a></li>
                <li><a href="/login">Login</a></li>
                <li><a href="/register">Create an account</a></li>
            <?php endif ?>
        </ul>
    </nav>

    <header>
        <h1><a href="/"><?= $settings['title'] ?></a></h1>

        <p><?= $settings['summary'] ?></p>
    </header>

    <main>
        <?= $this->section('content') ?>

        <?php if (!empty($flash_messages)) : ?>
            <script src="<?= $this->asset('/js/alert-alert.min.js') ?>"></script>

            <?php foreach ($flash_messages as $type => $messages) : ?>
                <script>
                    var type = '<?= $type ?>'
                    var message = '<?= implode(", ", $messages) ?>'

                    window.Alert.alert(type, message, { timeout: 5000 })
                </script>
            <?php endforeach ?>
        <?php endif ?>
    </main>
</body>
</html>
